"use strict";(()=>{var je=Object.create;var fe=Object.defineProperty;var Fe=Object.getOwnPropertyDescriptor;var $e=Object.getOwnPropertyNames;var Be=Object.getPrototypeOf,Ue=Object.prototype.hasOwnProperty;var M=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var Ge=(e,t,n,o)=>{if(t&&typeof t=="object"||typeof t=="function")for(let r of $e(t))!Ue.call(e,r)&&r!==n&&fe(e,r,{get:()=>t[r],enumerable:!(o=Fe(t,r))||o.enumerable});return e};var pe=(e,t,n)=>(n=e!=null?je(Be(e)):{},Ge(t||!e||!e.__esModule?fe(n,"default",{value:e,enumerable:!0}):n,e));var Q=M((St,Te)=>{Te.exports=He;function He(e,t){if(t!=="$")for(var n=ze(t),o=0;o<n.length;o++)t=n[o].toString().replace(/\\"/g,'"'),!(typeof e[t]>"u"&&o!==n.length-1)&&(e=e[t]);return e}function ze(e){for(var t=/(?:\.(\w+))|(?:\[(\d+)\])|(?:\["((?:[^\\"]|\\.)*)"\])/g,n=[],o;o=t.exec(e);)n.push(o[1]||o[2]||o[3]);return n}});var he=M(V=>{var Xe=Q(),Ie=Z();V.getRegexFlags=function(t){var n="";return t.ignoreCase&&(n+="i"),t.global&&(n+="g"),t.multiline&&(n+="m"),n};V.stringifyFunction=function(t,n){if(typeof n=="function")return n(t);var o=t.toString(),r=o.match(/^[^{]*{|^[^=]*=>/),i=r?r[0]:"<function> ",s=o[o.length-1]==="}"?"}":"";return i.replace(/\r\n|\n/g," ").replace(/\s+/g," ")+" /* ... */ "+s};V.restore=function(t,n){var o=t[0],r=t.slice(1);switch(o){case"$":return Xe(n,t);case"r":var i=r.indexOf(","),s=r.slice(0,i),a=r.slice(i+1);return RegExp(a,s);case"d":return new Date(+r);case"f":var d=function(){throw new Error("can't run jsan parsed function")};return d.toString=function(){return r},d;case"u":return;case"e":var u=new Error(r);return u.stack="Stack is unavailable for jsan parsed errors",u;case"s":return Symbol(r);case"g":return Symbol.for(r);case"m":return new Map(Ie.parse(r));case"l":return new Set(Ie.parse(r));case"n":return NaN;case"i":return 1/0;case"y":return-1/0;default:return console.warn("unknown type",t),t}}});var Oe=M(q=>{var Et=Q(),L=he(),Qe=typeof WeakMap<"u"?WeakMap:function(){var e=[],t=[];return{set:function(n,o){e.push(n),t.push(o)},get:function(n){for(var o=0;o<e.length;o++)if(e[o]===n)return t[o]}}};q.decycle=function e(t,n,o,r){"use strict";r=r||new Qe;var i=!Object.prototype.hasOwnProperty.call(n,"circular"),s=n.refs!==!1;return function a(d,u,m){var p,f,A,c=typeof o=="function"?o(m||"",d):d;if(n.date&&c instanceof Date)return{$jsan:"d"+c.getTime()};if(n.regex&&c instanceof RegExp)return{$jsan:"r"+L.getRegexFlags(c)+","+c.source};if(n.function&&typeof c=="function")return{$jsan:"f"+L.stringifyFunction(c,n.function)};if(n.nan&&typeof c=="number"&&isNaN(c))return{$jsan:"n"};if(n.infinity){if(Number.POSITIVE_INFINITY===c)return{$jsan:"i"};if(Number.NEGATIVE_INFINITY===c)return{$jsan:"y"}}if(n.undefined&&c===void 0)return{$jsan:"u"};if(n.error&&c instanceof Error)return{$jsan:"e"+c.message};if(n.symbol&&typeof c=="symbol"){var E=Symbol.keyFor(c);return E!==void 0?{$jsan:"g"+E}:{$jsan:"s"+c.toString().slice(7,-1)}}if(n.map&&typeof Map=="function"&&c instanceof Map&&typeof Array.from=="function")return{$jsan:"m"+JSON.stringify(e(Array.from(c),n,o,r))};if(n.set&&typeof Set=="function"&&c instanceof Set&&typeof Array.from=="function")return{$jsan:"l"+JSON.stringify(e(Array.from(c),n,o,r))};if(c&&typeof c.toJSON=="function")try{c=c.toJSON(m)}catch{var l=m||"$";return"toJSON failed for '"+(r.get(c)||l)+"'"}if(typeof c=="object"&&c!==null&&!(c instanceof Boolean)&&!(c instanceof Date)&&!(c instanceof Number)&&!(c instanceof RegExp)&&!(c instanceof String)&&typeof c!="symbol"&&!(c instanceof Error)){if(typeof c=="object"){var y=r.get(c);if(y){if(i&&s)return{$jsan:y};var T=u.split(".").slice(0,-1).join(".");if(T.indexOf(y)===0)return i?{$jsan:y}:typeof n.circular=="function"?n.circular(c,u,y):n.circular;if(s)return{$jsan:y}}r.set(c,u)}if(Object.prototype.toString.apply(c)==="[object Array]")for(A=[],p=0;p<c.length;p+=1)A[p]=a(c[p],u+"["+p+"]",p);else{A={};for(f in c)if(Object.prototype.hasOwnProperty.call(c,f)){var h=/^\w+$/.test(f)?"."+f:"["+JSON.stringify(f)+"]";A[f]=f==="$jsan"?[a(c[f],u+h)]:a(c[f],u+h,f)}}return A}return c}(t,"$")};q.retrocycle=function(t){"use strict";return function n(o){var r,i,s,a;if(o&&typeof o=="object")if(Object.prototype.toString.apply(o)==="[object Array]")for(r=0;r<o.length;r+=1)i=o[r],i&&typeof i=="object"&&(i.$jsan?o[r]=L.restore(i.$jsan,t):n(i));else for(s in o){if(typeof o[s]=="string"&&s==="$jsan")return L.restore(o.$jsan,t);s==="$jsan"&&(o[s]=o[s][0]),typeof o[s]=="object"&&(i=o[s],i&&typeof i=="object"&&(i.$jsan?o[s]=L.restore(i.$jsan,t):n(i)))}return o}(t)}});var Z=M(ee=>{var xe=Oe();ee.stringify=function(t,n,o,r){if(arguments.length<4)try{return arguments.length===1?JSON.stringify(t):JSON.stringify.apply(JSON,arguments)}catch{}var i=r||!1;typeof i=="boolean"&&(i={date:i,function:i,regex:i,undefined:i,error:i,symbol:i,map:i,set:i,nan:i,infinity:i});var s=xe.decycle(t,i,n);return arguments.length===1?JSON.stringify(s):JSON.stringify(s,Array.isArray(n)?n:null,o)};ee.parse=function(t,n){var o=/"\$jsan"/.test(t),r;return arguments.length===1?r=JSON.parse(t):r=JSON.parse(t,n),o&&(r=xe.retrocycle(r)),r}});var te=M((ht,be)=>{be.exports=Z()});var F=navigator.userAgent.includes("Electron"),le=navigator.userAgent.includes("Firefox");(F&&location.pathname==="/background.bundle.js"||le)&&(chrome.runtime.onConnectExternal={addListener(){}},chrome.runtime.onMessageExternal={addListener(){}},F?(chrome.notifications={onClicked:{addListener(){}},create(){},clear(){}},chrome.contextMenus={onClicked:{addListener(){}}},chrome.commands={onCommand:{addListener(){}}}):(chrome.storage.sync=chrome.storage.local,chrome.runtime.onInstalled={addListener:e=>e()}));if(F){(!chrome.storage.local||!chrome.storage.local.remove)&&(chrome.storage.local={set(t,n){Object.keys(t).forEach(o=>{localStorage.setItem(o,t[o])}),n&&n()},get(t,n){let o={};Object.keys(t).forEach(r=>{o[r]=localStorage.getItem(r)||t[r]}),n&&n(o)},remove(t,n){Array.isArray(t)?t.forEach(o=>{localStorage.removeItem(o)}):localStorage.removeItem(t),n&&n()}});let e=chrome.runtime.sendMessage;chrome.runtime.sendMessage=function(){return typeof arguments[arguments.length-1]=="function"&&Array.prototype.pop.call(arguments),e(...arguments)}}(le||F)&&(chrome.storage.sync=chrome.storage.local);function S(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var Ve=typeof Symbol=="function"&&Symbol.observable||"@@observable",ye=Ve,z=()=>Math.random().toString(36).substring(7).split("").join("."),We={INIT:`@@redux/INIT${z()}`,REPLACE:`@@redux/REPLACE${z()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${z()}`},$=We;function Ke(e){if(typeof e!="object"||e===null)return!1;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||Object.getPrototypeOf(e)===null}function X(e,t,n){if(typeof e!="function")throw new Error(S(2));if(typeof t=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(S(0));if(typeof t=="function"&&typeof n>"u"&&(n=t,t=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(S(1));return n(X)(e,t)}let o=e,r=t,i=new Map,s=i,a=0,d=!1;function u(){s===i&&(s=new Map,i.forEach((l,y)=>{s.set(y,l)}))}function m(){if(d)throw new Error(S(3));return r}function p(l){if(typeof l!="function")throw new Error(S(4));if(d)throw new Error(S(5));let y=!0;u();let T=a++;return s.set(T,l),function(){if(y){if(d)throw new Error(S(6));y=!1,u(),s.delete(T),i=null}}}function f(l){if(!Ke(l))throw new Error(S(7));if(typeof l.type>"u")throw new Error(S(8));if(typeof l.type!="string")throw new Error(S(17));if(d)throw new Error(S(9));try{d=!0,r=o(r,l)}finally{d=!1}return(i=s).forEach(T=>{T()}),l}function A(l){if(typeof l!="function")throw new Error(S(10));o=l,f({type:$.REPLACE})}function c(){let l=p;return{subscribe(y){if(typeof y!="object"||y===null)throw new Error(S(11));function T(){let b=y;b.next&&b.next(m())}return T(),{unsubscribe:l(T)}},[ye](){return this}}}return f({type:$.INIT}),{dispatch:f,subscribe:p,getState:m,replaceReducer:A,[ye]:c}}function Je(e){Object.keys(e).forEach(t=>{let n=e[t];if(typeof n(void 0,{type:$.INIT})>"u")throw new Error(S(12));if(typeof n(void 0,{type:$.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(S(13))})}function ge(e){let t=Object.keys(e),n={};for(let s=0;s<t.length;s++){let a=t[s];typeof e[a]=="function"&&(n[a]=e[a])}let o=Object.keys(n),r,i;try{Je(n)}catch(s){i=s}return function(a={},d){if(i)throw i;let u=!1,m={};for(let p=0;p<o.length;p++){let f=o[p],A=n[f],c=a[f],E=A(c,d);if(typeof E>"u"){let l=d&&d.type;throw new Error(S(14))}m[f]=E,u=u||E!==c}return u=u||o.length!==Object.keys(a).length,u?m:a}}function Ye(...e){return e.length===0?t=>t:e.length===1?e[0]:e.reduce((t,n)=>(...o)=>t(n(...o)))}function me(...e){return t=>(n,o)=>{let r=t(n,o),i=()=>{throw new Error(S(15))},s={getState:r.getState,dispatch:(d,...u)=>i(d,...u)},a=e.map(d=>d(s));return i=Ye(...a)(r.dispatch),{...r,dispatch:i}}}var v="devTools/UPDATE_STATE",B="devTools/SET_STATE",Se="devTools/SELECT_INSTANCE",R="devTools/REMOVE_INSTANCE",Ae="devTools/CLEAR_INSTANCES",w="devTools/LIFTED_ACTION";var Ee="devTools/TOGGLE_SYNC",U="devTools/TOGGLE_PERSIST",G="devTools/SET_PERSIST";var C=Symbol.for("__serializedType__"),D=Symbol.for("__serializedRef__");var ne=pe(te());function Ze(e,t){if(typeof t=="object"&&t!==null&&"__serializedType__"in t&&typeof t.data=="object"){let n=t.data;return n[C]=t.__serializedType__,"__serializedRef__"in t&&(n[D]=t.__serializedRef__),n}return t}function N(e,t){if(typeof e!="string")return e;try{return t?ne.default.parse(e,Ze):ne.default.parse(e)}catch{return}}function W(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,o=e.stagedActionIds.slice(1,n+1);for(let r=0;r<o.length;r++)if(e.computedStates[r+1].error){n=r,o=e.stagedActionIds.slice(1,n+1);break}else delete e.actionsById[o[r]];e.skippedActionIds=e.skippedActionIds.filter(r=>!o.includes(r)),e.stagedActionIds=[0,...e.stagedActionIds.slice(n+1)],e.committedState=e.computedStates[n].state,e.computedStates=e.computedStates.slice(n),e.currentStateIndex=e.currentStateIndex>n?e.currentStateIndex-n:0}function K(e,t,n){let o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:1,r=arguments.length>4?arguments[4]:void 0,i=arguments.length>5?arguments[5]:void 0,s=o-1,a={...e};if(a.currentStateIndex===a.stagedActionIds.length-1&&a.currentStateIndex++,a.stagedActionIds=[...a.stagedActionIds,s],a.actionsById={...a.actionsById},n.type==="PERFORM_ACTION"?a.actionsById[s]=n:a.actionsById[s]={action:n.action||n,timestamp:n.timestamp||Date.now(),stack:n.stack,type:"PERFORM_ACTION"},a.nextActionId=o,a.computedStates=[...a.computedStates,{state:t}],i)W(a);else if(r){let d=a.stagedActionIds.length-r;d>0&&W(a,d)}return a}var Ne={selected:null,current:"default",sync:!1,connections:{},options:{default:{features:{}}},states:{default:{actionsById:{},computedStates:[],currentStateIndex:-1,nextActionId:0,skippedActionIds:[],stagedActionIds:[]}}};function qe(e,t,n,o){let r=t.payload,i=t.actionsById;i?(r={...r,actionsById:N(i,o),computedStates:N(t.computedStates,o)},t.type==="STATE"&&t.committedState&&(r.committedState=r.computedStates[0].state)):r=N(r,o);let s,a=e[n]||e.default,d=t.action&&N(t.action,o)||{};switch(t.type){case"INIT":s=K(e.default,r,{action:{type:"@@INIT"},timestamp:d.timestamp||Date.now()});break;case"ACTION":{let u=t.isExcess,m=t.nextActionId||a.nextActionId+1,p=t.maxAge;if(Array.isArray(d)){s=a;for(let f=0;f<d.length;f++)s=K(s,t.batched?r:r[f],d[f],s.nextActionId+1,p,u)}else s=K(a,r,d,m,p,u);break}case"STATE":s=r,s.computedStates.length<=s.currentStateIndex&&(s.currentStateIndex=s.computedStates.length-1);break;case"PARTIAL_STATE":{let u=t.maxAge,m=r.nextActionId,p=r.stagedActionIds,f=r.computedStates,A,c,E;if(m>u){let T=a.stagedActionIds,h=T.indexOf(p[1]),b;if(h>0){c=a.computedStates.slice(h-1),A={...a.actionsById};for(let H=1;H<h;H++)b=T[H],b&&delete A[b];E=f[0].state}else A=a.actionsById,c=a.computedStates,E=a.committedState}else A=a.actionsById,c=a.computedStates,E=a.committedState;f=[...c,...f];let l=f.length,y=r.currentStateIndex;l<=y&&(y=l-1),s={...a,actionsById:{...A,...r.actionsById},computedStates:f,currentStateIndex:y,nextActionId:m,stagedActionIds:p,committedState:E};break}case"LIFTED":s=a;break;default:return e}return t.liftedState&&(s={...s,...t.liftedState}),{...e,[n]:s}}function et(e,t){let{action:n}=t;if(n.type==="JUMP_TO_STATE"||n.type==="JUMP_TO_ACTION"){let o=e.selected||e.current,r=e.states[o],i=n.type==="JUMP_TO_STATE"?n.index:r.stagedActionIds.indexOf(n.actionId);return{...e,states:{...e.states,[o]:{...r,currentStateIndex:i}}}}return e}function tt(e,t){let n=e.connections[t];if(!n)return e;let o={...e.connections},r={...e.options},i={...e.states},s=e.selected,a=e.current,d=e.sync;return delete o[t],n.forEach(u=>{if(u===s&&(s=null,d=!1),u===a){let m=Object.keys(o)[0];m?a=o[m][0]:a="default"}delete r[u],delete i[u]}),{selected:s,current:a,sync:d,connections:o,options:r,states:i}}function nt(e,t,n){let{type:o,action:r,name:i,libConfig:s={}}=e,a,d,u=s.actionCreators||r;return typeof u=="string"&&(u=JSON.parse(u)),Array.isArray(u)&&(d=u),o==="STATE"&&(a="redux"),{name:s.name||i||n,connectionId:t,explicitLib:s.type,lib:a,actionCreators:d,features:s.features?s.features:{lock:a==="redux",export:s.type==="redux"?"custom":!0,import:"custom",persist:!0,pause:!0,reorder:!0,jump:!0,skip:!0,dispatch:!0,sync:!0,test:!0},serialize:s.serialize}}function _e(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Ne,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case v:{let{request:n}=t;if(!n)return e;let o=t.id||n.id,r=n.instanceId||o,i=e.connections,s=e.options;return typeof e.options[r]>"u"&&(i={...e.connections,[o]:[...i[o]||[],r]},s={...s,[r]:nt(n,o,r)}),{...e,current:r,connections:i,options:s,states:qe(e.states,n,r,s[r].serialize)}}case B:return{...e,states:{...e.states,[ot(e)]:t.newState}};case U:return{...e,persisted:!e.persisted};case G:return{...e,persisted:t.payload};case Ee:return{...e,sync:!e.sync};case Se:return{...e,selected:t.selected,sync:!1};case R:return tt(e,t.id);case w:{if(t.message==="DISPATCH")return et(e,t);if(t.message==="IMPORT"){let n=e.selected||e.current;if(e.options[n].features.import===!0)return{...e,states:{...e.states,[n]:N(t.state)}}}return e}case Ae:return Ne;default:return e}}var ot=e=>e.selected||e.current;var oe=pe(te());function rt(e,t){if(typeof t=="object"&&t!==null&&C in t){let n=t[C],o={...t};delete o[C];let r={data:o,__serializedType__:n};return D in t&&(r.__serializedRef__=o[D]),r}return t}function O(e,t){return t?oe.default.stringify(e,rt,null,!0):oe.default.stringify(e)}function it(e){let t=new Set(e.skippedActionIds);return{...e,actionsById:Object.fromEntries(Object.entries(e.actionsById).filter(n=>{let[o]=n;return!t.has(parseInt(o,10))})),stagedActionIds:e.stagedActionIds.filter(n=>!t.has(n)),skippedActionIds:[],currentStateIndex:Math.min(e.currentStateIndex,e.stagedActionIds.length-1)}}function P(e,t,n,o,r,i){let s=i||e.getState().instances,a=s.states[n],d=s.options[n];if(t!=="DISPATCH")return t==="IMPORT"?d.features.import===!0?O(a.computedStates[a.currentStateIndex].state,!0):r:void 0;if(d.lib!=="redux")switch(o.type){case"TOGGLE_ACTION":return O(a,!0);case"JUMP_TO_STATE":return O(a.computedStates[o.index].state,!0);case"JUMP_TO_ACTION":return O(a.computedStates[a.stagedActionIds.indexOf(o.actionId)].state,!0);case"ROLLBACK":return O(a.computedStates[0].state,!0);case"SWEEP":e.dispatch({type:B,newState:it(a)});return;default:return}}var st=ge({instances:_e}),we=st;var re={};function x(e){re[e]?chrome.windows.update(re[e],{focused:!0},()=>{chrome.runtime.lastError&&Ce(e)}):Ce(e)}function Ce(e){let t=chrome.runtime.getURL(at(e));chrome.windows.create({type:"popup",url:t},n=>{re[e]=n.id,navigator.userAgent.indexOf("Firefox")!==-1&&chrome.windows.update(n.id,{focused:!0})})}function at(e){switch(e){case"devtools-window":return"devpanel.html";case"devtools-remote":return"remote.html";default:throw new Error(`Unrecognized position: ${e}`)}}function Pe(e,t,n){chrome.storage.local.get(["s:hostname","s:port","s:secure"],o=>{if(!o["s:hostname"]||!o["s:port"])return;let r=`${o["s:secure"]?"https":"http"}://${o["s:hostname"]}:${o["s:port"]}`;fetch(r,{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({op:"get",id:e})}).then(i=>i.json()).then(i=>{let{payload:s,preloadedState:a}=i;s&&g.dispatch({type:w,message:"IMPORT",state:JSON.stringify({payload:s,preloadedState:a}),id:t,instanceId:`${t}/${n}`})}).catch(function(i){console.warn(i)})})}var ct="socket/CONNECTED",dt="socket/DISCONNECTED",I={tab:{},panel:{}},k={},J=0,se=(e,t)=>e.tab?e.tab.id:t||e.id,ie=32*1024*1024;function j(e){for(let t of Object.values(I.panel))try{t.postMessage(e)}catch(n){if(e.type!==v||n==null||n.message!=="Message length exceeded maximum allowed length.")throw n;let o={split:"start"},r=[],i=0;for(let[s,a]of Object.entries(e.request)){if(typeof a=="string"&&(i+=a.length,i>ie)){r.push([s,a]);continue}o[s]=a}t.postMessage({...e,request:o});for(let s=0;s<r.length;s++)for(let a=0;a<r[s][1].length;a+=ie)t.postMessage({...e,request:{split:"chunk",chunk:[r[s][0],r[s][1].substring(a,a+ie)]}});t.postMessage({...e,request:{split:"end"}})}}function ve(e){if(e.message==="DISPATCH"){let{message:t,action:n,id:o,instanceId:r,state:i}=e;I.tab[o].postMessage({type:t,action:n,state:P(g,t,r,n,i),id:r.toString().replace(/^[^\/]+\//,"")})}else if(e.message==="IMPORT"){let{message:t,action:n,id:o,instanceId:r,state:i}=e;I.tab[o].postMessage({type:t,action:n,state:P(g,t,r,n,i),id:r.toString().replace(/^[^\/]+\//,"")})}else if(e.message==="ACTION"){let{message:t,action:n,id:o,instanceId:r,state:i}=e;I.tab[o].postMessage({type:t,action:n,state:P(g,t,r,n,i),id:r.toString().replace(/^[^\/]+\//,"")})}else if(e.message==="EXPORT"){let{message:t,action:n,id:o,instanceId:r,state:i}=e;I.tab[o].postMessage({type:t,action:n,state:P(g,t,r,n,i),id:r.toString().replace(/^[^\/]+\//,"")})}else{let{message:t,action:n,id:o,instanceId:r,state:i}=e;I.tab[o].postMessage({type:t,action:n,state:P(g,t,r,n,i),id:r.toString().replace(/^[^\/]+\//,"")})}}function ae(e){for(let t of Object.values(I.tab))t.postMessage(e)}function ut(){let e=g.getState().instances,t=e.states[e.current],n=t.computedStates[t.currentStateIndex];return n?n.error:!1}function ft(){let e=g.getState();if(e.instances.persisted)for(let t of Object.keys(e.instances.connections)){if(I.tab[t])return;g.dispatch({type:R,id:t}),j({type:"NA",id:t})}}function ce(e,t){let n=se(t);if(!n)return;if(t.frameId&&(n=`${n}-${t.frameId}`),e.type==="STOP"){Object.keys(g.getState().instances.connections).length||g.dispatch({type:dt});return}if(e.type==="OPEN_OPTIONS"){chrome.runtime.openOptionsPage();return}if(e.type==="OPTIONS"){ae({type:"OPTIONS",options:e.options});return}if(e.type==="GET_REPORT"){Pe(e.payload,n,e.instanceId);return}if(e.type==="OPEN"){let i="devtools-window";["remote","window"].includes(e.position)&&(i="devtools-"+e.position),x(i);return}if(e.type==="ERROR"){if(e.payload){j(e);return}if(!e.message)return;let i=ut();chrome.notifications.create("app-error",{type:"basic",title:i?"An error occurred in the reducer":"An error occurred in the app",message:i||e.message,iconUrl:"img/logo/48x48.png",isClickable:!!i});return}let o={type:v,request:e,id:n},r=`${n}/${e.instanceId}`;if("split"in e){if(e.split==="start"){k[r]=e;return}if(e.split==="chunk"){k[r][e.chunk[0]]=(k[r][e.chunk[0]]||"")+e.chunk[1];return}o.request=k[r],delete k[r]}e.instanceId&&(o.request.instanceId=r),g.dispatch(o),j(o)}function Me(e,t,n){return function o(){let r=I[e][t];n&&r&&r.onMessage.removeListener(n),r&&r.onDisconnect.removeListener(o),delete I[e][t],e==="tab"?g.getState().instances.persisted||(g.dispatch({type:R,id:t}),j({type:"NA",id:t})):(J--,J===0&&ae({type:"STOP"}))}}function Re(e){let t,n;g.dispatch({type:ct,port:e}),e.name==="tab"?(t=se(e.sender),e.sender.frameId&&(t=`${t}-${e.sender.frameId}`),I.tab[t]=e,n=o=>{if(o!=="heartbeat"){if(o.name==="INIT_INSTANCE"){typeof t=="number"&&(chrome.action.enable(t),chrome.action.setIcon({tabId:t,path:"img/logo/38x38.png"})),J>0&&e.postMessage({type:"START"});let r=g.getState();if(r.instances.persisted){let i=`${t}/${o.instanceId}`,s=r.instances.states[i];if(!s)return;ve({message:"IMPORT",id:t,instanceId:i,state:O(s,r.instances.options[i].serialize)})}return}o.name==="RELAY"&&ce(o.message,e.sender)}},e.onMessage.addListener(n),e.onDisconnect.addListener(Me("tab",t,n))):e.name&&e.name.indexOf("monitor")===0&&(t=se(e.sender,e.name),I.panel[t]=e,J++,ae({type:"START"}),n=o=>{o!=="heartbeat"&&g.dispatch(o)},e.onMessage.addListener(n),e.onDisconnect.addListener(Me("panel",t,n)))}chrome.runtime.onConnect.addListener(Re);chrome.runtime.onConnectExternal.addListener(Re);chrome.runtime.onMessage.addListener(ce);chrome.runtime.onMessageExternal.addListener(ce);chrome.notifications.onClicked.addListener(e=>{chrome.notifications.clear(e),x("devtools-window")});var pt=e=>t=>n=>{let o=n;return o.type===w?ve(o):o.type===U&&(ft(),j({type:G,payload:!e.getState().instances.persisted})),t(o)},Le=pt;function de(e){return X(we,e,me(Le))}function ue(){let e=[{id:"devtools-window",title:"Open in a window"},{id:"devtools-remote",title:"Open Remote DevTools"}],t={};chrome.commands.getAll(n=>{for(let{name:o,shortcut:r}of n)t[o]=r;for(let{id:o,title:r}of e)chrome.contextMenus.create({id:o,title:r+(t[o]?" ("+t[o]+")":""),contexts:["all"]})})}function De(){chrome.contextMenus.removeAll()}chrome.contextMenus.onClicked.addListener(({menuItemId:e})=>{x(e)});var _={DO_NOT_FILTER:"DO_NOT_FILTER",DENYLIST_SPECIFIC:"DENYLIST_SPECIFIC",ALLOWLIST_SPECIFIC:"ALLOWLIST_SPECIFIC"};var Y;var lt=e=>({...e,filter:typeof e.filter=="boolean"?e.filter&&e.whitelist.length>0?_.ALLOWLIST_SPECIFIC:e.filter?_.DENYLIST_SPECIFIC:_.DO_NOT_FILTER:e.filter==="WHITELIST_SPECIFIC"?_.ALLOWLIST_SPECIFIC:e.filter==="BLACKLIST_SPECIFIC"?_.DENYLIST_SPECIFIC:e.filter}),ke=e=>{Y?e(Y):chrome.storage.sync.get({useEditor:0,editor:"",projectPath:"",maxAge:50,filter:_.DO_NOT_FILTER,whitelist:"",blacklist:"",allowlist:"",denylist:"",shouldCatchErrors:!1,inject:!0,urls:`^https?://localhost|0\\.0\\.0\\.0:\\d+
^https?://.+\\.github\\.io`,showContextMenus:!0},function(t){Y=lt(t),e(Y)})};var g=de();chrome.commands.onCommand.addListener(e=>{x(e)});chrome.runtime.onInstalled.addListener(()=>{chrome.action.disable(),ke(e=>{e.showContextMenus&&ue()})});chrome.storage.onChanged.addListener(e=>{e.showContextMenus&&(e.showContextMenus.newValue?ue():De())});})();
