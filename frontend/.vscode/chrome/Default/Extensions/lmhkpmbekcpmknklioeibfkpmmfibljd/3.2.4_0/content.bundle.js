"use strict";(()=>{var y=navigator.userAgent.includes("Electron"),O=navigator.userAgent.includes("Firefox");(y&&location.pathname==="/background.bundle.js"||O)&&(chrome.runtime.onConnectExternal={addListener(){}},chrome.runtime.onMessageExternal={addListener(){}},y?(chrome.notifications={onClicked:{addListener(){}},create(){},clear(){}},chrome.contextMenus={onClicked:{addListener(){}}},chrome.commands={onCommand:{addListener(){}}}):(chrome.storage.sync=chrome.storage.local,chrome.runtime.onInstalled={addListener:e=>e()}));if(y){(!chrome.storage.local||!chrome.storage.local.remove)&&(chrome.storage.local={set(t,n){Object.keys(t).forEach(o=>{localStorage.setItem(o,t[o])}),n&&n()},get(t,n){let o={};Object.keys(t).forEach(d=>{o[d]=localStorage.getItem(d)||t[d]}),n&&n(o)},remove(t,n){Array.isArray(t)?t.forEach(o=>{localStorage.removeItem(o)}):localStorage.removeItem(t),n&&n()}});let e=chrome.runtime.sendMessage;chrome.runtime.sendMessage=function(){return typeof arguments[arguments.length-1]=="function"&&Array.prototype.pop.call(arguments),e(...arguments)}}(O||y)&&(chrome.storage.sync=chrome.storage.local);var i={DO_NOT_FILTER:"DO_NOT_FILTER",DENYLIST_SPECIFIC:"DENYLIST_SPECIFIC",ALLOWLIST_SPECIFIC:"ALLOWLIST_SPECIFIC"};var u;var M=e=>({...e,filter:typeof e.filter=="boolean"?e.filter&&e.whitelist.length>0?i.ALLOWLIST_SPECIFIC:e.filter?i.DENYLIST_SPECIFIC:i.DO_NOT_FILTER:e.filter==="WHITELIST_SPECIFIC"?i.ALLOWLIST_SPECIFIC:e.filter==="BLACKLIST_SPECIFIC"?i.DENYLIST_SPECIFIC:e.filter}),g=e=>{u?e(u):chrome.storage.sync.get({useEditor:0,editor:"",projectPath:"",maxAge:50,filter:i.DO_NOT_FILTER,whitelist:"",blacklist:"",allowlist:"",denylist:"",shouldCatchErrors:!1,inject:!0,urls:`^https?://localhost|0\\.0\\.0\\.0:\\d+
^https?://.+\\.github\\.io`,showContextMenus:!0},function(t){u=M(t),e(u)})},C=()=>g(()=>{});var S=e=>e!==""?e.split(`
`).filter(Boolean).join("|"):null,A=e=>({...e,allowlist:e.filter!==i.DO_NOT_FILTER?S(e.allowlist):e.allowlist,denylist:e.filter!==i.DO_NOT_FILTER?S(e.denylist):e.denylist}),x=(e=u)=>!e||e.inject||!e.urls||location.href.match(S(e.urls));var a="@devtools-extension",m="@devtools-page",I=32*1024*1024,h=!1,s;function c(e){window.postMessage(e,"*")}function P(){h=!0;let e="tab";window.devToolsExtensionID?s=chrome.runtime.connect(window.devToolsExtensionID,{name:e}):s=chrome.runtime.connect({name:e}),s.onMessage.addListener(t=>{"action"in t?t.type==="DISPATCH"?c({type:t.type,payload:t.action,state:t.state,id:t.id,source:a}):t.type==="ACTION"?c({type:t.type,payload:t.action,state:t.state,id:t.id,source:a}):c({type:t.type,payload:t.action,state:t.state,id:t.id,source:a}):t.type==="OPTIONS"?c({type:t.type,options:A(t.options),id:void 0,source:a}):c({type:t.type,state:t.state,id:t.id,source:a})}),s.onDisconnect.addListener(L)}function L(){window.removeEventListener("message",b),window.postMessage({type:"STOP",failed:!0,source:a},"*"),s=void 0}function w(e,t){try{return e(t)}catch(n){if(n.message==="Message length exceeded maximum allowed length."){let o=t.instanceId,d={split:"start"},l=[],T=0,p;Object.keys(t).map(r=>{if(p=t[r],typeof p=="string"&&(T+=p.length,T>I)){l.push([r,p]);return}d[r]=p}),e(d);for(let r=0;r<l.length;r++)for(let f=0;f<l[r][1].length;f+=I)e({instanceId:o,source:m,split:"chunk",chunk:[l[r][0],l[r][1].substr(f,I)]});return e({instanceId:o,source:m,split:"end"})}L()}}function E(e){s.postMessage(e)}function F(e){h||P(),e.type==="INIT_INSTANCE"?(g(t=>{c({type:"OPTIONS",options:A(t),id:void 0,source:a})}),E({name:"INIT_INSTANCE",instanceId:e.instanceId})):E({name:"RELAY",message:e})}function b(e){if(!x()||!e||e.source!==window||typeof e.data!="object")return;let t=e.data;if(t.source===m){if(t.type==="DISCONNECT"){s&&(s.disconnect(),h=!1);return}w(F,t)}}C();window.addEventListener("message",b,!1);setInterval(()=>{s?.postMessage("heartbeat")},15e3);})();
